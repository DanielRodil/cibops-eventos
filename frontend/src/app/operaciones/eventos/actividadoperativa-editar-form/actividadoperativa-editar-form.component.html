<body class="d-flex flex-column min-vh-100">
    <main>
        <div class="container mt-auto">
            
            <h2>Editar Actividad Operativa</h2>

            <form #AOeditarForm="ngForm"  class="was-validated">

                <div class="row justify-content-center">
                    <div class="col-8">

                        <!-- <div class="mb-3 mt-3">
                            <label class="form-label">Tipo de Evento:</label>
                            <input type="text" class="form-control" placeholder="Actividad operativa" name="tipoEvento">
                        </div> -->

                        <div class="mb-3">
                            <label class="form-label">Nombre:</label>
                            <input type="text" class="form-control" 
                                name="nombreActividadOperativa" minlength="12" maxlength="50"
                                [(ngModel)]="actividadoperativa.nombre" required
                                #nombreActividadOperativa="ngModel" [ngClass]="{
                                    'is-invalid': nombreActividadOperativa.invalid && (nombreActividadOperativa.dirty || nombreActividadOperativa.touched),
                                    'is-valid': !nombreActividadOperativa.invalid
                                }">
                            <div class="text-danger"
                                *ngIf="nombreActividadOperativa.invalid && (nombreActividadOperativa.dirty || nombreActividadOperativa.touched)">
                                <div *ngIf="nombreActividadOperativa.errors?.['required']">
                                    Debe introducir el nombre de la actividad operativa.
                                </div>
                                <div *ngIf="nombreActividadOperativa.errors?.['minlength']">
                                    El nombre de la actividad operativa debe tener un minimo de 12 caracteres y un máximo de 50.
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Descripción:</label>
                            <textarea type="text" class="form-control" rows="6"
                                name="descripcionActividadOperativa" minlength="12" maxlength="500" [(ngModel)]="actividadoperativa.descripcion" required
                                #descripcionActividadOperativa="ngModel" [ngClass]="{
                                    'is-invalid': descripcionActividadOperativa.invalid && (descripcionActividadOperativa.dirty || descripcionActividadOperativa.touched),
                                    'is-valid': !descripcionActividadOperativa.invalid
                            }"></textarea>
                            <div class="text-danger"
                                *ngIf="descripcionActividadOperativa.invalid && (descripcionActividadOperativa.dirty || descripcionActividadOperativa.touched)">
                                <div *ngIf="descripcionActividadOperativa.errors?.['required']">
                                    Debe introducir la descripcion de la actividad operativa.
                                </div>
                                <div *ngIf="descripcionActividadOperativa.errors?.['minlength']">
                                    La descripcion de la actividad operativa debe tener un minimo de 12 caracteres y un maximo de 500.
                                </div>
                            </div>
                        </div>

                        <div><label class="form-label">Gastos:</label></div>
                        <div class="mb-3 input-group">
                            <input type="text" class="form-control" 
                            maxlength="4" [(ngModel)]="actividadoperativa.gastos">
                            <span class="input-group-text">€</span>
                        </div>

                        <div class="mb-3 mt-3">
                            <label class="form-label operacion">Operacion:</label>
                            <select [(ngModel)]="actividadoperativa.operacion" class="form-select" 
                                    aria-label="Default select example" name="selectorFormulario" id="selectorOperacion" required>
                                <option class="form-control operacion"  
                                        *ngFor="let operacion of operaciones" 
                                        value="{{operacion.urlOperacion}}">{{ operacion.nombre }}</option>
                            </select>
                        </div>

                        <div>
                            <app-agentes-evento></app-agentes-evento>
                        </div>

                    </div>
                </div>

                <div class="row justify-content-center">
                    
                    <div class="col-2">
                        <button id="guardarAO" type="submit" class="btn btn-primary" 
                        [disabled]="!AOeditarForm.form.valid" (click)="onEditarActividadOperativa()" routerLink="/operaciones">Editar</button>
                    </div>
                    
                    <div class="col-2">
                        <a routerLink="/"><button id="cancelar" type="button" class="btn btn-danger">Cancelar</button></a>
                    </div>
                    
                    <div class="col-2">
                        <button id="reset" type="reset" class="btn btn-warning">Resetear valores</button>
                    </div>
                </div>

            </form>
            
        </div>
        <br>         <pre>{{ actividadoperativa | json }}</pre>

    </main>
</body>